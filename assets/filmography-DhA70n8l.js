import"./navigation-DTsS0dMv.js";import"./hpApi-l0sNRNKZ.js";class k{constructor(){this.bookModal=document.getElementById("book-modal"),this.movieModal=document.getElementById("movie-modal"),this.modalOverlay=document.getElementById("modal-overlay"),this.allBooks=[],this.allMovies=[],this.initModalEvents()}initModalEvents(){document.querySelectorAll(".modal_window .cross").forEach(t=>{t.addEventListener("click",()=>this.closeAllModals())}),this.modalOverlay.addEventListener("click",()=>this.closeAllModals()),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.closeAllModals()})}closeAllModals(){this.bookModal.style.display="none",this.movieModal.style.display="none",this.modalOverlay.style.display="none",document.body.style.overflow=""}openBookModal(e){const t=this.allBooks.find(i=>i.id===e);t&&(this.fillBookModal(t),this.bookModal.style.display="block",this.modalOverlay.style.display="block",document.body.style.overflow="hidden")}openMovieModal(e){const t=this.allMovies.find(i=>i.id===e);t&&(this.fillMovieModal(t),this.movieModal.style.display="block",this.modalOverlay.style.display="block",document.body.style.overflow="hidden")}fillBookModal(e){document.getElementById("book-title").textContent=e.title,document.getElementById("book-serial").textContent=`Serial: #${e.serial||"Unknown"}`,document.getElementById("book-release").textContent=`Release Date: ${e.release_date||"Unknown"}`,document.getElementById("book-pages").textContent=`Pages: ${e.pages||"Unknown"}`;const t=document.getElementById("book-image");t.src=e.cover||mediaAPI.getDefaultBookCover(),t.alt=e.title;const i=document.getElementById("book-description");i.innerHTML=`<div>${e.summary||"No description available"}</div>`}fillMovieModal(e){document.getElementById("movie-title").textContent=e.title,document.getElementById("movie-release").textContent=`Release Date: ${e.release_date||"Unknown"}`,document.getElementById("movie-runtime").textContent=`Runtime: ${e.running_time||"Unknown"}`,document.getElementById("movie-rating").textContent=`Rating: ${e.rating||"Unknown"}`;const t=document.getElementById("movie-image");t.src=e.poster||mediaAPI.getDefaultMoviePoster(),t.alt=e.title;const i=document.getElementById("movie-directors");e.directors&&e.directors.length>0?i.innerHTML=e.directors.map(s=>`<div>${s}</div>`).join(""):i.innerHTML="<div>No director information available</div>";const l=document.getElementById("movie-boxoffice");let o="";e.budget&&(o+=`<div>Budget: ${e.budget}</div>`),e.box_office&&(o+=`<div>Box Office: ${e.box_office}</div>`),l.innerHTML=o||"<div>No financial information available</div>"}addBookClickHandlers(){document.querySelector(".books-track").querySelectorAll(".filmography-item").forEach(t=>{t.addEventListener("click",()=>{const i=t.dataset.bookId;this.openBookModal(i)})})}addMovieClickHandlers(){document.querySelector(".movies-track").querySelectorAll(".filmography-item").forEach(t=>{t.addEventListener("click",()=>{const i=t.dataset.movieId;this.openMovieModal(i)})})}setBooksData(e){this.allBooks=e}setMoviesData(e){this.allMovies=e}}function y(a,e,t){const i=document.querySelector(a),l=i.querySelectorAll(".filmography-item"),o=document.querySelector(e),s=document.querySelector(t);if(!i||l.length===0)return;let n=0;function v(){return window.innerWidth<=768?2:4}let r=v(),d=Math.max(0,l.length-r);function c(){const m=l[0].offsetWidth+40,g=-n*m;i.style.transform=`translateX(${g}px)`,f()}function f(){o&&(o.disabled=n===0,o.style.opacity=n===0?"0.3":"1"),s&&(s.disabled=n>=d,s.style.opacity=n>=d?"0.3":"1")}function u(){const m=v();m!==r&&(r=m,d=Math.max(0,l.length-r),n>d&&(n=d),c())}s&&s.addEventListener("click",()=>{n<d&&(n++,c())}),o&&o.addEventListener("click",()=>{n>0&&(n--,c())}),window.addEventListener("resize",u),c()}document.addEventListener("DOMContentLoaded",async function(){const a=new k;try{const e=await HPapi.getBooks(),t=document.querySelector(".books-track");a.setBooksData(e),e&&e.length>0?(t.innerHTML=e.map(o=>`
                <div class="filmography-item" data-book-id="${o.id}">
                    <div class="filmography-card">
                        <div class="filmography-image">
                            <img src="${o.cover}" alt="${o.title}" 
                                 onerror="this.src='${mediaAPI.getDefaultBookCover()}'">
                        </div>
                    </div>
                    <div class="filmography-info-block">
                        <h3 class="filmography-name">${o.title}</h3>
                        <p class="filmography-details">Book #${o.serial||"Unknown"} • ${o.release_date?new Date(o.release_date).getFullYear():"Unknown"}</p>
                    </div>
                </div>
            `).join(""),a.addBookClickHandlers()):t.innerHTML='<div class="loading-error">Failed to load books</div>';const i=await HPapi.getMovies(),l=document.querySelector(".movies-track");a.setMoviesData(i),i&&i.length>0?(l.innerHTML=i.map(o=>`
                <div class="filmography-item" data-movie-id="${o.id}">
                    <div class="filmography-card">
                        <div class="filmography-image">
                            <img src="${o.poster}" alt="${o.title}"
                                 onerror="this.src='${mediaAPI.getDefaultMoviePoster()}'">
                        </div>
                    </div>
                    <div class="filmography-info-block">
                        <h3 class="filmography-name">${o.title}</h3>
                        <p class="filmography-details">Movie #${o.serial||"Unknown"} • ${o.release_date?new Date(o.release_date).getFullYear():"Unknown"}</p>
                    </div>
                </div>
            `).join(""),a.addMovieClickHandlers()):l.innerHTML='<div class="loading-error">Failed to load movies</div>',setTimeout(()=>{y(".books-track",".books-prev",".books-next"),y(".movies-track",".movies-prev",".movies-next")},100)}catch(e){console.error("Data loading error:",e)}});
